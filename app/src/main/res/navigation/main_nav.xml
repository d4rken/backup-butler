<?xml version="1.0" encoding="utf-8"?>
<navigation xmlns:android="http://schemas.android.com/apk/res/android"
    xmlns:app="http://schemas.android.com/apk/res-auto"
    xmlns:tools="http://schemas.android.com/tools"
    android:id="@+id/main_nav_graph"
    app:startDestination="@id/initFragment">

    <fragment
        android:id="@+id/initFragment"
        android:name="eu.darken.bb.main.ui.InitFragment"
        android:label="InitFragment"
        tools:layout="@layout/init_fragment">
        <action
            android:id="@+id/action_initFragment_to_mainFragment"
            app:destination="@id/mainFragment"
            app:popUpTo="@+id/main_nav_graph" />
        <action
            android:id="@+id/action_initFragment_to_quickModeFragment"
            app:destination="@id/quickModeFragment"
            app:popUpTo="@+id/main_nav_graph" />
        <action
            android:id="@+id/action_initFragment_to_helloStepFragment"
            app:destination="@id/helloStepFragment"
            app:popUpTo="@+id/main_nav_graph" />
        <action
            android:id="@+id/action_initFragment_to_betaStepFragment"
            app:destination="@id/betaStepFragment"
            app:popUpTo="@+id/main_nav_graph" />
    </fragment>

    <fragment
        android:id="@+id/mainFragment"
        android:name="eu.darken.bb.main.ui.MainFragment"
        tools:layout="@layout/main_fragment">
        <action
            android:id="@+id/action_mainFragment_to_storageActionDialog"
            app:destination="@id/storageActionDialog" />
        <action
            android:id="@+id/action_mainFragment_to_generatorsActionDialog"
            app:destination="@id/generatorsActionDialog" />
        <action
            android:id="@+id/action_mainFragment_to_taskActionDialog"
            app:destination="@id/taskActionDialog" />
        <action
            android:id="@+id/action_mainFragment_to_quickModeFragment"
            app:destination="@id/quickModeFragment"
            app:popUpTo="@id/quickModeFragment" />
        <action
            android:id="@+id/action_mainFragment_to_storage_editor"
            app:destination="@id/storage_editor">
            <argument
                android:name="storageId"
                app:argType="eu.darken.bb.storage.core.Storage$Id"
                app:nullable="true" />
        </action>
        <action
            android:id="@+id/action_mainFragment_to_task_editor"
            app:destination="@id/task_editor">
            <argument
                android:name="args"
                app:argType="eu.darken.bb.task.ui.editor.TaskEditorArgs" />
        </action>
    </fragment>

    <dialog
        android:id="@+id/storageActionDialog"
        android:name="eu.darken.bb.storage.ui.list.actions.StorageActionDialog"
        android:label="StorageActionDialog"
        tools:layout="@layout/storage_list_action_dialog">
        <argument
            android:name="storageId"
            app:argType="eu.darken.bb.storage.core.Storage$Id" />
        <action
            android:id="@+id/action_storageActionDialog_to_storage_editor"
            app:destination="@id/storage_editor">
            <argument
                android:name="storageId"
                app:argType="eu.darken.bb.storage.core.Storage$Id" />
        </action>
        <action
            android:id="@+id/action_storageActionDialog_to_task_editor"
            app:destination="@id/task_editor">
            <argument
                android:name="args"
                app:argType="eu.darken.bb.task.ui.editor.TaskEditorArgs" />
        </action>
        <action
            android:id="@+id/action_storageActionDialog_to_storageViewerActivity"
            app:destination="@id/storageViewerActivity" />
    </dialog>
    <dialog
        android:id="@+id/taskActionDialog"
        android:name="eu.darken.bb.task.ui.tasklist.actions.TaskActionDialog"
        android:label="TaskActionDialog"
        tools:layout="@layout/task_list_action_dialog">
        <argument
            android:name="taskId"
            app:argType="eu.darken.bb.task.core.Task$Id" />
        <action
            android:id="@+id/action_taskActionDialog_to_task_editor"
            app:destination="@id/task_editor">
            <argument
                android:name="args"
                app:argType="eu.darken.bb.task.ui.editor.TaskEditorArgs" />
        </action>
    </dialog>
    <dialog
        android:id="@+id/generatorsActionDialog"
        android:name="eu.darken.bb.backup.ui.generator.list.actions.GeneratorsActionDialog"
        android:label="@string/backup_generator_label"
        tools:layout="@layout/generator_list_action_dialog">
        <argument
            android:name="generatorId"
            app:argType="eu.darken.bb.backup.core.Generator$Id" />
    </dialog>

    <fragment
        android:id="@+id/quickModeFragment"
        android:name="eu.darken.bb.quickmode.ui.QuickModeFragment"
        tools:layout="@layout/quickmode_main_fragment">
        <action
            android:id="@+id/action_quickModeFragment_to_mainFragment"
            app:destination="@id/mainFragment"
            app:popUpTo="@id/mainFragment" />
        <action
            android:id="@+id/action_quickModeFragment_to_wizardAppsFragment"
            app:destination="@id/wizardAppsFragment">
            <argument
                android:name="taskId"
                android:defaultValue="@null"
                app:argType="eu.darken.bb.task.core.Task$Id"
                app:nullable="true" />
        </action>
        <action
            android:id="@+id/action_quickModeFragment_to_wizardFilesFragment"
            app:destination="@id/wizardFilesFragment">
            <argument
                android:name="taskId"
                android:defaultValue="@null"
                app:argType="eu.darken.bb.task.core.Task$Id"
                app:nullable="true" />
        </action>
        <action
            android:id="@+id/action_quickModeFragment_to_storageViewerActivity"
            app:destination="@id/storageViewerActivity" />
    </fragment>
    <fragment
        android:id="@+id/helloStepFragment"
        android:name="eu.darken.bb.onboarding.ui.hello.HelloStepFragment"
        android:label="HelloStepFragment"
        tools:layout="@layout/onboarding_step_hello_fragment">
        <action
            android:id="@+id/action_helloStepFragment_to_costStepFragment"
            app:destination="@id/costStepFragment" />
    </fragment>
    <fragment
        android:id="@+id/costStepFragment"
        android:name="eu.darken.bb.onboarding.ui.cost.CostStepFragment"
        android:label="CostStepFragment"
        tools:layout="@layout/onboarding_step_cost_fragment">
        <action
            android:id="@+id/action_costStepFragment_to_modeStepFragment"
            app:destination="@id/modeStepFragment" />
    </fragment>
    <fragment
        android:id="@+id/modeStepFragment"
        android:name="eu.darken.bb.onboarding.ui.mode.ModeStepFragment"
        android:label="ModeStepFragment"
        tools:layout="@layout/onboarding_step_mode_fragment">
        <action
            android:id="@+id/action_modeStepFragment_to_initFragment"
            app:destination="@id/initFragment"
            app:popUpTo="@+id/main_nav_graph"
            app:popUpToInclusive="true" />
    </fragment>
    <fragment
        android:id="@+id/betaStepFragment"
        android:name="eu.darken.bb.onboarding.ui.beta.BetaStepFragment"
        android:label="BetaStepFragment"
        tools:layout="@layout/onboarding_step_beta_fragment">
        <action
            android:id="@+id/action_betaStepFragment_to_helloStepFragment"
            app:destination="@id/helloStepFragment"
            app:popUpTo="@+id/main_nav_graph" />
        <action
            android:id="@+id/action_betaStepFragment_to_initFragment"
            app:destination="@id/initFragment"
            app:popUpTo="@+id/main_nav_graph" />
    </fragment>
    <fragment
        android:id="@+id/wizardAppsFragment"
        android:name="eu.darken.bb.quickmode.ui.wizard.apps.WizardAppsFragment"
        android:label="WizardAppsFragment"
        tools:layout="@layout/quickmode_wizard_apps_fragment">
        <action
            android:id="@+id/action_wizardAppsFragment_to_storage_picker"
            app:destination="@id/storage_picker">
            <argument
                android:name="taskId"
                app:argType="eu.darken.bb.task.core.Task$Id" />
        </action>
        <action
            android:id="@+id/action_wizardAppsFragment_to_mainFragment"
            app:destination="@id/mainFragment" />
    </fragment>
    <fragment
        android:id="@+id/wizardFilesFragment"
        android:name="eu.darken.bb.quickmode.ui.wizard.files.WizardFilesFragment"
        android:label="WizardFilesFragment"
        tools:layout="@layout/quickmode_wizard_files_fragment">
        <action
            android:id="@+id/action_wizardFilesFragment_to_storage_picker"
            app:destination="@id/storage_picker">
            <argument
                android:name="taskId"
                app:argType="eu.darken.bb.task.core.Task$Id" />
        </action>
        <action
            android:id="@+id/action_wizardFilesFragment_to_mainFragment"
            app:destination="@id/mainFragment"
            app:popUpTo="@id/mainFragment" />
    </fragment>
    <include app:graph="@navigation/storage_editor" />
    <fragment
        android:id="@+id/storageListFragment"
        android:name="eu.darken.bb.storage.ui.list.StorageListFragment"
        android:label="StorageListFragment"
        tools:layout="@layout/storage_list_fragment">
        <action
            android:id="@+id/action_storageListFragment_to_storage_editor"
            app:destination="@id/storage_editor">
            <argument
                android:name="storageId"
                app:argType="eu.darken.bb.storage.core.Storage$Id"
                app:nullable="true" />
        </action>
    </fragment>

    <include app:graph="@navigation/task_editor" />

    <include app:graph="@navigation/storage_picker" />

    <activity
        android:id="@+id/storageViewerActivity"
        android:name="eu.darken.bb.storage.ui.viewer.StorageViewerActivity"
        tools:layout="@layout/storage_viewer_itemlist_fragment">
        <argument
            android:name="storageId"
            app:argType="eu.darken.bb.storage.core.Storage$Id" />
    </activity>

</navigation>